<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .element {
        position: relative;
        top: 60%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    .background{
        background-image: url("http://getwallpapers.com/wallpaper/full/8/8/5/884299-gorgerous-cute-kitten-wallpaper-2880x1800-for-4k-monitor.jpg");
        background-size:cover;
        background-repeat: no-repeat;
        height: 100vh;
    }
    
    </style>
  </head>

  <body class="background bg-gray-700">
    <div
      class="h-[100vh] flex justify-center items-center font-['Poppins',sans-serif]"
    >
      <div
        id="login-container"
        class="flex flex-col justify-between items-center bg-white rounded-xl px-5 py-8 shadow-xl"
      >
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paw-print"><circle cx="11" cy="4" r="2"/><circle cx="18" cy="8" r="2"/><circle cx="20" cy="16" r="2"/><path d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"/></svg>

        <h1 class="font-bold text-2xl mt-3 mb-5">Register Your Account</h1>
        <form
          action=""
          method="post"
          class="flex flex-col w-[20rem]"
          id="regiFormm"
        >
          <label class="my-1" for="username" id="user">Username</label>
          <input
            class="text-black rounded-lg bg-slate-100 mb-4 pl-2 py-[1px] border-[1px] border-slate-500"
            type="text"
            id="regi-user"
            name="username"
            placeholder="Username"
          />
          <label class="my-1" for="email" id="regi-email">Email</label>
          <input
            class="text-black rounded-lg bg-slate-100 mb-4 pl-2 py-[1px] border-[1px] border-slate-500"
            type="email"
            id="email"
            name="email"
            placeholder="johndoe@gmail.com"
          />
          <label class="my-1" for="contact" id="regi-contact">Phone No.</label>
          <input
            class="text-black rounded-lg bg-slate-100 mb-4 pl-2 py-[1px] border-[1px] border-slate-500"
            type="text"
            maxlength="10"
            id="contact"
            name="contact"
            placeholder="9820231536"
          />
          <label class="my-1" for="password" id="regi-password">Password</label>
          <input
            class="text-black rounded-lg bg-slate-100 mb-4 pl-2 py-[1px] border-[1px] border-slate-500"
            type="password"
            name="password"
            id="password"
            placeholder="Enter password"
          />
          <button
            type="submit"
            class="bg-black text-white p-1 rounded-xl mt-3 hover:opacity-80"
          >
            Register
          </button>
          <p class="pt-2">
            Already have an account?
            <a class="underline" href="login.html">Login</a>
          </p>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      const regiForm = document.getElementById("regiFormm");
      regiForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const name = document.getElementById("regi-user").value;
        const email = document.getElementById("email").value;
        const contact = document.getElementById("contact").value;
        const password = document.getElementById("password").value;
        const data = {
          name,
          email,
          contact,
          password,
        };
        try {
          const res = await axios.post("http://localhost:4000/api/login", data);
          console.log(res);
          if (res.status === 200) {
            alert("Registration successful");
            const _id = res.data.user._id;
            const email = res.data.user.email;
            const name = res.data.user.name;
            const contact = res.data.user.contact;
            console.log(_id);
            localStorage.setItem("email", email);
            localStorage.setItem("name", name);
            localStorage.setItem("id", _id);
            localStorage.setItem("contact", contact);
            window.location.href = "index.html";
          } else {
            alert("Registration failed");
          }
        } catch (error) {
          console.error(error);
        }
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
  </body>
</html>
